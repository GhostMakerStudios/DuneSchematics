<<<<<<< HEAD
<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Dune Unique Schematics</title>
<style>
  :root{
    --bg:#0f1220; --panel:#1a1f33; --grid:#111427;
    --gold:#cdb26a; --text:#e6e6ea; --muted:#a3a7b7; --accent:#7b5cff; /* purple */
    --tile: #0c0f1e; --tileBorder:#c4a23e;
  }
  *{box-sizing:border-box}
  body{
    margin:0; font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Inter, Arial;
    color:var(--text); background:linear-gradient(180deg,#0c1022,#0a0d1a 50%,#070a15);
    min-height:100vh; display:grid; grid-template-columns: 1fr 380px; gap:0;
  }
  header{
    grid-column:1 / span 2; padding:16px 20px; background:#0b1021; border-bottom:1px solid #1f2440;
    display:flex; align-items:center; justify-content:space-between;
  }
  h1{ margin:0; font-size:18px; color:var(--gold); letter-spacing:1px; text-transform:uppercase }
  .progress{ font-variant-numeric:tabular-nums; color:var(--muted) }

  .left{
    padding:14px 18px 24px; overflow:auto; background:var(--grid);
  }
  .sectionTitle{
    color:var(--gold); font-size:13px; letter-spacing:.8px; text-transform:uppercase;
    margin:14px 4px 8px; display:flex; align-items:center; justify-content:space-between;
  }
  .grid{
    display:grid; grid-template-columns: repeat(auto-fill, minmax(96px, 1fr));
    gap:10px; padding-bottom:20px;
  }
  .tile{
    position:relative; aspect-ratio:1/1; border:1px solid var(--tileBorder); border-radius:8px;
    background:linear-gradient(180deg,#0f1330,#0b0f24); display:flex; align-items:center; justify-content:center;
    cursor:pointer; overflow:hidden; transition:transform .06s ease, border-color .12s ease, box-shadow .12s ease;
  }
  .tile:hover{ 
    transform:translateY(-1px); 
    box-shadow:0 10px 24px rgba(0,0,0,.35);
  }
  .tile:hover::after{
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: #523d5d;
    opacity: 0.4;
    pointer-events: none;
    z-index: 1;
  }
  .tile.selected{
    border: 1px solid var(--tileBorder);
    outline: 2px solid #ebb2eb;
    outline-offset: 2px;
  }
  .tile img{ width:100%; height:100%; object-fit:cover; filter:grayscale(1) brightness(.8) }
  .tile.collected img{
    filter: none; /* Remove filter to show actual purple image */
  }

  .tile.locked { opacity:.35; pointer-events:none }
  .tile .label{
    position:absolute; bottom:0; left:0; right:0; font-size:11px; text-align:center; color:#c9cbe0;
    padding:4px 6px; background:linear-gradient(180deg, transparent, rgba(0,0,0,.45));
    z-index: 2;
  }

  .right{
    border-left:1px solid #1f2440; background:var(--panel); display:flex; flex-direction:column; min-height:0;
  }
  .card{
    padding:16px; border-bottom:1px solid #222744;
  }
  .name{ margin:0 0 4px; font-size:16px }
  .tagline{ margin:0; color:var(--muted); font-size:13px; line-height:1.35 }
  .meta{ padding:12px 16px; border-bottom:1px solid #222744; font-size:13px; color:#cfd3ea }
  .meta div{ margin:6px 0 }
  .meta a{ color:#9fb6ff; text-decoration:none }
  .meta a:hover{ text-decoration:underline }
  .works{ padding:12px 16px; font-size:13px; color:#cfd3ea }
  .works ul{ margin:8px 0 0 18px }

  .empty{
    margin:28px 16px; color:var(--muted); font-size:13px;
  }
  @media (max-width:860px){
    body{ grid-template-columns: 1fr }
    .right{ order:2 }
  }

  .toolbar{
    display:flex; gap:8px; align-items:center;
  }
  .btn{
    padding:8px 10px; background:#121632; border:1px solid #272d4e; border-radius:8px; color:#dfe2ff;
    cursor:pointer; font-size:13px;
  }
  .btn:hover{ border-color:#3a4170 }
  .search{ padding:8px 10px; background:#0c1030; border:1px solid #272d4e; border-radius:8px; color:#e6e6ea; width:220px }
</style>
</head>
<body>

<header>
  <h1>Unique Schematics</h1>
  <div class="toolbar">
    <input id="search" class="search" placeholder="Search…" />
    <button id="exportBtn" class="btn">Export</button>
    <input id="importFile" type="file" accept="application/json" hidden />
    <button id="importBtn" class="btn">Import</button>
    <div class="progress" id="progress">0 / 0</div>
  </div>
</header>

<section class="left" id="left"></section>

<aside class="right" id="right">
  <div class="empty">Hover a tile to see details here. Click a tile to mark it collected.</div>
</aside>

<script>
  // simple data schema; replace with your real items and images
  // put your PNGs in ./Images (capital I) and reference by baseImg
  const DATA = [
    // COPPER PRODUCTS - 17 items
    { id:"copper-1", name:"Item 1", section:"Copper Products", baseImg:"Copper1", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"copper-2", name:"Item 2", section:"Copper Products", baseImg:"Copper2", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"copper-3", name:"Item 3", section:"Copper Products", baseImg:"Copper3", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"copper-4", name:"Item 4", section:"Copper Products", baseImg:"Copper4", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"copper-5", name:"Item 5", section:"Copper Products", baseImg:"Copper5", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"copper-6", name:"Item 6", section:"Copper Products", baseImg:"Copper6", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"copper-7", name:"Item 7", section:"Copper Products", baseImg:"Copper7", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"copper-8", name:"Item 8", section:"Copper Products", baseImg:"Copper8", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"copper-9", name:"Item 9", section:"Copper Products", baseImg:"Copper9", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"copper-10", name:"Item 10", section:"Copper Products", baseImg:"Copper10", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"copper-11", name:"Item 11", section:"Copper Products", baseImg:"Copper11", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"copper-12", name:"Item 12", section:"Copper Products", baseImg:"Copper12", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"copper-13", name:"Item 13", section:"Copper Products", baseImg:"Copper13", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"copper-14", name:"Item 14", section:"Copper Products", baseImg:"Copper14", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"copper-15", name:"Item 15", section:"Copper Products", baseImg:"Copper15", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"copper-16", name:"Item 16", section:"Copper Products", baseImg:"Copper16", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"copper-17", name:"Item 17", section:"Copper Products", baseImg:"Copper17", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    
    // IRON PRODUCTS - 30 items
    { id:"iron-1", name:"Item 1", section:"Iron Products", baseImg:"Iron1", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"iron-2", name:"Item 2", section:"Iron Products", baseImg:"Iron2", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"iron-3", name:"Item 3", section:"Iron Products", baseImg:"Iron3", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"iron-4", name:"Item 4", section:"Iron Products", baseImg:"Iron4", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"iron-5", name:"Item 5", section:"Iron Products", baseImg:"Iron5", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"iron-6", name:"Item 6", section:"Iron Products", baseImg:"Iron6", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"iron-7", name:"Item 7", section:"Iron Products", baseImg:"Iron7", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"iron-8", name:"Item 8", section:"Iron Products", baseImg:"Iron8", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"iron-9", name:"Item 9", section:"Iron Products", baseImg:"Iron9", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"iron-10", name:"Item 10", section:"Iron Products", baseImg:"Iron10", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"iron-11", name:"Item 11", section:"Iron Products", baseImg:"Iron11", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"iron-12", name:"Item 12", section:"Iron Products", baseImg:"Iron12", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"iron-13", name:"Item 13", section:"Iron Products", baseImg:"Iron13", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"iron-14", name:"Item 14", section:"Iron Products", baseImg:"Iron14", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"iron-15", name:"Item 15", section:"Iron Products", baseImg:"Iron15", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"iron-16", name:"Item 16", section:"Iron Products", baseImg:"Iron16", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"iron-17", name:"Item 17", section:"Iron Products", baseImg:"Iron17", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"iron-18", name:"Item 18", section:"Iron Products", baseImg:"Iron18", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"iron-19", name:"Item 19", section:"Iron Products", baseImg:"Iron19", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"iron-20", name:"Item 20", section:"Iron Products", baseImg:"Iron20", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"iron-21", name:"Item 21", section:"Iron Products", baseImg:"Iron21", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"iron-22", name:"Item 22", section:"Iron Products", baseImg:"Iron22", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"iron-23", name:"Item 23", section:"Iron Products", baseImg:"Iron23", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"iron-24", name:"Item 24", section:"Iron Products", baseImg:"Iron24", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"iron-25", name:"Item 25", section:"Iron Products", baseImg:"Iron25", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"iron-26", name:"Item 26", section:"Iron Products", baseImg:"Iron26", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"iron-27", name:"Item 27", section:"Iron Products", baseImg:"Iron27", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"iron-28", name:"Item 28", section:"Iron Products", baseImg:"Iron28", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"iron-29", name:"Item 29", section:"Iron Products", baseImg:"Iron29", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"iron-30", name:"Item 30", section:"Iron Products", baseImg:"Iron30", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    
    // STEEL PRODUCTS - 45 items
    { id:"steel-1", name:"Item 1", section:"Steel Products", baseImg:"Steel1", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"steel-2", name:"Item 2", section:"Steel Products", baseImg:"Steel2", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"steel-3", name:"Item 3", section:"Steel Products", baseImg:"Steel3", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"steel-4", name:"Item 4", section:"Steel Products", baseImg:"Steel4", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"steel-5", name:"Item 5", section:"Steel Products", baseImg:"Steel5", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"steel-6", name:"Item 6", section:"Steel Products", baseImg:"Steel6", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"steel-7", name:"Item 7", section:"Steel Products", baseImg:"Steel7", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"steel-8", name:"Item 8", section:"Steel Products", baseImg:"Steel8", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"steel-9", name:"Item 9", section:"Steel Products", baseImg:"Steel9", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"steel-10", name:"Item 10", section:"Steel Products", baseImg:"Steel10", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"steel-11", name:"Item 11", section:"Steel Products", baseImg:"Steel11", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"steel-12", name:"Item 12", section:"Steel Products", baseImg:"Steel12", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"steel-13", name:"Item 13", section:"Steel Products", baseImg:"Steel13", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"steel-14", name:"Item 14", section:"Steel Products", baseImg:"Steel14", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"steel-15", name:"Item 15", section:"Steel Products", baseImg:"Steel15", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"steel-16", name:"Item 16", section:"Steel Products", baseImg:"Steel16", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"steel-17", name:"Item 17", section:"Steel Products", baseImg:"Steel17", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"steel-18", name:"Item 18", section:"Steel Products", baseImg:"Steel18", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"steel-19", name:"Item 19", section:"Steel Products", baseImg:"Steel19", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"steel-20", name:"Item 20", section:"Steel Products", baseImg:"Steel20", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"steel-21", name:"Item 21", section:"Steel Products", baseImg:"Steel21", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"steel-22", name:"Item 22", section:"Steel Products", baseImg:"Steel22", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"steel-23", name:"Item 23", section:"Steel Products", baseImg:"Steel23", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"steel-24", name:"Item 24", section:"Steel Products", baseImg:"Steel24", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"steel-25", name:"Item 25", section:"Steel Products", baseImg:"Steel25", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"steel-26", name:"Item 26", section:"Steel Products", baseImg:"Steel26", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"steel-27", name:"Item 27", section:"Steel Products", baseImg:"Steel27", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"steel-28", name:"Item 28", section:"Steel Products", baseImg:"Steel28", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"steel-29", name:"Item 29", section:"Steel Products", baseImg:"Steel29", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"steel-30", name:"Item 30", section:"Steel Products", baseImg:"Steel30", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"steel-31", name:"Item 31", section:"Steel Products", baseImg:"Steel31", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"steel-32", name:"Item 32", section:"Steel Products", baseImg:"Steel32", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"steel-33", name:"Item 33", section:"Steel Products", baseImg:"Steel33", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"steel-34", name:"Item 34", section:"Steel Products", baseImg:"Steel34", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"steel-35", name:"Item 35", section:"Steel Products", baseImg:"Steel35", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"steel-36", name:"Item 36", section:"Steel Products", baseImg:"Steel36", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"steel-37", name:"Item 37", section:"Steel Products", baseImg:"Steel37", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"steel-38", name:"Item 38", section:"Steel Products", baseImg:"Steel38", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"steel-39", name:"Item 39", section:"Steel Products", baseImg:"Steel39", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"steel-40", name:"Item 40", section:"Steel Products", baseImg:"Steel40", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"steel-41", name:"Item 41", section:"Steel Products", baseImg:"Steel41", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"steel-42", name:"Item 42", section:"Steel Products", baseImg:"Steel42", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"steel-43", name:"Item 43", section:"Steel Products", baseImg:"Steel43", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"steel-44", name:"Item 44", section:"Steel Products", baseImg:"Steel44", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"steel-45", name:"Item 45", section:"Steel Products", baseImg:"Steel45", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    
    // Add remaining sections here...
  ];

  const KEY = "dune-grid-v1";
  const $ = s => document.querySelector(s);
  const left = $("#left");
  const right = $("#right");
  const search = $("#search");

  let state = { collected: new Set(), filter:"", selected: null };

     function load(){
     try{
       const raw = JSON.parse(localStorage.getItem(KEY) || "{}");
       state.collected = new Set(raw.collected || []);
       state.selected = raw.selected || null;
     }catch{}
   }
   function save(){
     localStorage.setItem(KEY, JSON.stringify({ 
       collected: [...state.collected],
       selected: state.selected
     }));
   }

  function sectionsFromData(){
    const map = new Map();
    for(const item of DATA){
      if(!map.has(item.section)) map.set(item.section, []);
      map.get(item.section).push(item);
    }
    return map;
  }

  function renderLeft(){
    left.innerHTML = "";
    const sections = sectionsFromData();
    const term = state.filter.trim().toLowerCase();
    for(const [section, items] of sections){
      const filtered = items.filter(i=>{
        if(!term) return true;
        return [i.name, i.blurb, i.find, ...(i.components||[]), ...(i.worksWith||[])]
          .join(" ").toLowerCase().includes(term);
      });
      if(!filtered.length) continue;

      const title = document.createElement("div");
      title.className="sectionTitle";
      title.innerHTML = `<span>${section}</span><span>${countCollected(items)} / ${items.length}</span>`;
      left.append(title);

      const grid = document.createElement("div");
      grid.className="grid";
      for(const it of filtered){
                 const tile = document.createElement("div");
         tile.className = "tile";
         if(state.collected.has(it.id)) tile.classList.add("collected");
         if(state.selected === it.id) tile.classList.add("selected");

        const img = document.createElement("img");
        img.alt = it.name;
        // Use baseImg to create the correct image path (0 = grey, 1 = purple)
        const imgState = state.collected.has(it.id) ? 1 : 0;
        img.src = it.baseImg ? `Images/${it.baseImg}.${imgState}.png` : "";
        img.onerror = ()=>{ img.style.display="none"; tile.insertAdjacentHTML("beforeend", `<div style="color:#667; font-size:12px">no image</div>`); };

        const label = document.createElement("div"); label.className="label"; label.textContent = it.name;

        tile.append(img, label);
        tile.title = it.name;

                 tile.addEventListener("click", ()=>{
           // Set as selected item to show info
           state.selected = it.id;
           save();
           renderLeft();
           showDetails(it);
         });
         
         tile.addEventListener("dblclick", ()=>{
           // Toggle collection status on double click
           if(state.collected.has(it.id)) state.collected.delete(it.id);
           else state.collected.add(it.id);
           
           save();
           
           // Update the image immediately to show the new state
           const imgState = state.collected.has(it.id) ? 1 : 0;
           img.src = `Images/${it.baseImg}.${imgState}.png`;
           
           // Re-render to update collection styling
           renderLeft();
           updateProgress();
         });

        grid.append(tile);
      }
      left.append(grid);
    }
  }

  function showDetails(it){
    right.innerHTML = "";
    const top = document.createElement("div");
    top.className="card";
    top.innerHTML = `<h2 class="name">${it.name}</h2>
      <p class="tagline">${it.blurb || "—"}</p>`;
    right.append(top);

    const meta = document.createElement("div");
    meta.className="meta";
    const comp = (it.components||[]).length ? it.components.join(", ") : "—";
    const ww = (it.worksWith||[]).length ? it.worksWith.join(", ") : "—";
    meta.innerHTML = `
      <div><span style="color:${getVar('--gold')}">Components</span>: ${comp}</div>
      <div><span style="color:${getVar('--gold')}">Works with</span>: ${ww}</div>
      <div><span style="color:${getVar('--gold')}">Where to find</span>: ${it.find || "—"}</div>
      ${it.map ? `<div><a href="${it.map}" target="_blank" rel="noopener">Open map</a></div>` : ""}`;
    right.append(meta);

    const works = document.createElement("div");
    works.className="works";
    works.innerHTML = `
      <div>Status: ${state.collected.has(it.id) ? "Collected" : "Not collected"}</div>
      <ul><li>Click tile to toggle</li><li>Data saved on this device</li></ul>`;
    right.append(works);
  }

  function getVar(name){ return getComputedStyle(document.documentElement).getPropertyValue(name) || "" }

  function countCollected(items){
    return items.reduce((n,i)=> n + (state.collected.has(i.id)?1:0), 0);
  }

  function updateProgress(){
    const total = DATA.length;
    const got = [...state.collected].filter(id => DATA.some(i=>i.id===id)).length;
    $("#progress").textContent = `${got} / ${total}`;
  }

  $("#exportBtn").onclick = ()=>{
    const blob = new Blob([JSON.stringify({ collected:[...state.collected] }, null, 2)], {type:"application/json"});
    const a = document.createElement("a");
    a.href = URL.createObjectURL(blob);
    a.download = "dune-schematics-progress.json";
    a.click(); URL.revokeObjectURL(a.href);
  };
  $("#importBtn").onclick = ()=> $("#importFile").click();
  $("#importFile").addEventListener("change", async e=>{
    const file = e.target.files[0]; if(!file) return;
    try{
      const text = await file.text();
      const data = JSON.parse(text);
      state.collected = new Set(data.collected || []);
      save(); renderLeft(); updateProgress();
    }catch{
      alert("Import failed. Choose a valid JSON file.");
    }
    e.target.value = "";
  });

  search.addEventListener("input", ()=>{
    state.filter = search.value;
    renderLeft();
  });

     load();
   renderLeft();
   updateProgress();
   
   // Show details for selected item if one exists
   if(state.selected) {
     const selectedItem = DATA.find(item => item.id === state.selected);
     if(selectedItem) showDetails(selectedItem);
   }
</script>
</body>
</html>
=======
<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Dune Unique Schematics</title>
<style>
  :root{
    --bg:#0f1220; --panel:#1a1f33; --grid:#111427;
    --gold:#cdb26a; --text:#e6e6ea; --muted:#a3a7b7; --accent:#7b5cff; /* purple */
    --tile: #0c0f1e; --tileBorder:#c4a23e;
  }
  *{box-sizing:border-box}
  body{
    margin:0; font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Inter, Arial;
    color:var(--text); background:linear-gradient(180deg,#0c1022,#0a0d1a 50%,#070a15);
    min-height:100vh; display:grid; grid-template-columns: 1fr 380px; gap:0;
  }
  header{
    grid-column:1 / span 2; padding:16px 20px; background:#0b1021; border-bottom:1px solid #1f2440;
    display:flex; align-items:center; justify-content:space-between;
  }
  h1{ margin:0; font-size:18px; color:var(--gold); letter-spacing:1px; text-transform:uppercase }
  .progress{ font-variant-numeric:tabular-nums; color:var(--muted) }

  .left{
    padding:14px 18px 24px; overflow:auto; background:var(--grid);
  }
  .sectionTitle{
    color:var(--gold); font-size:13px; letter-spacing:.8px; text-transform:uppercase;
    margin:14px 4px 8px; display:flex; align-items:center; justify-content:space-between;
  }
  .grid{
    display:grid; grid-template-columns: repeat(auto-fill, minmax(96px, 1fr));
    gap:10px; padding-bottom:20px;
  }
  .tile{
    position:relative; aspect-ratio:1/1; border:1px solid var(--tileBorder); border-radius:8px;
    background:linear-gradient(180deg,#0f1330,#0b0f24); display:flex; align-items:center; justify-content:center;
    cursor:pointer; overflow:hidden; transition:transform .06s ease, border-color .12s ease, box-shadow .12s ease;
  }
  .tile:hover{ 
    transform:translateY(-1px); 
    box-shadow:0 10px 24px rgba(0,0,0,.35);
  }
  .tile:hover::after{
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: #523d5d;
    opacity: 0.4;
    pointer-events: none;
    z-index: 1;
  }
  .tile.selected{
    border: 1px solid var(--tileBorder);
    outline: 2px solid #ebb2eb;
    outline-offset: 2px;
  }
  .tile img{ width:100%; height:100%; object-fit:cover; filter:grayscale(1) brightness(.8) }
  .tile.collected img{
    filter: none; /* Remove filter to show actual purple image */
  }

  .tile.locked { opacity:.35; pointer-events:none }
  .tile .label{
    position:absolute; bottom:0; left:0; right:0; font-size:11px; text-align:center; color:#c9cbe0;
    padding:4px 6px; background:linear-gradient(180deg, transparent, rgba(0,0,0,.45));
    z-index: 2;
  }

  .right{
    border-left:1px solid #1f2440; background:var(--panel); display:flex; flex-direction:column; min-height:0;
  }
  .card{
    padding:16px; border-bottom:1px solid #222744;
  }
  .name{ margin:0 0 4px; font-size:16px }
  .tagline{ margin:0; color:var(--muted); font-size:13px; line-height:1.35 }
  .meta{ padding:12px 16px; border-bottom:1px solid #222744; font-size:13px; color:#cfd3ea }
  .meta div{ margin:6px 0 }
  .meta a{ color:#9fb6ff; text-decoration:none }
  .meta a:hover{ text-decoration:underline }
  .works{ padding:12px 16px; font-size:13px; color:#cfd3ea }
  .works ul{ margin:8px 0 0 18px }

  .empty{
    margin:28px 16px; color:var(--muted); font-size:13px;
  }
  @media (max-width:860px){
    body{ grid-template-columns: 1fr }
    .right{ order:2 }
  }

  .toolbar{
    display:flex; gap:8px; align-items:center;
  }
  .btn{
    padding:8px 10px; background:#121632; border:1px solid #272d4e; border-radius:8px; color:#dfe2ff;
    cursor:pointer; font-size:13px;
  }
  .btn:hover{ border-color:#3a4170 }
  .search{ padding:8px 10px; background:#0c1030; border:1px solid #272d4e; border-radius:8px; color:#e6e6ea; width:220px }
</style>
</head>
<body>

<header>
  <h1>Unique Schematics</h1>
  <div class="toolbar">
    <input id="search" class="search" placeholder="Search…" />
    <button id="exportBtn" class="btn">Export</button>
    <input id="importFile" type="file" accept="application/json" hidden />
    <button id="importBtn" class="btn">Import</button>
    <div class="progress" id="progress">0 / 0</div>
  </div>
</header>

<section class="left" id="left"></section>

<aside class="right" id="right">
  <div class="empty">Hover a tile to see details here. Click a tile to mark it collected.</div>
</aside>

<script>
  // simple data schema; replace with your real items and images
  // put your PNGs in ./Images (capital I) and reference by baseImg
  const DATA = [
    // COPPER PRODUCTS - 17 items
    { id:"copper-1", name:"Item 1", section:"Copper Products", baseImg:"Copper1", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"copper-2", name:"Item 2", section:"Copper Products", baseImg:"Copper2", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"copper-3", name:"Item 3", section:"Copper Products", baseImg:"Copper3", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"copper-4", name:"Item 4", section:"Copper Products", baseImg:"Copper4", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"copper-5", name:"Item 5", section:"Copper Products", baseImg:"Copper5", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"copper-6", name:"Item 6", section:"Copper Products", baseImg:"Copper6", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"copper-7", name:"Item 7", section:"Copper Products", baseImg:"Copper7", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"copper-8", name:"Item 8", section:"Copper Products", baseImg:"Copper8", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"copper-9", name:"Item 9", section:"Copper Products", baseImg:"Copper9", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"copper-10", name:"Item 10", section:"Copper Products", baseImg:"Copper10", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"copper-11", name:"Item 11", section:"Copper Products", baseImg:"Copper11", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"copper-12", name:"Item 12", section:"Copper Products", baseImg:"Copper12", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"copper-13", name:"Item 13", section:"Copper Products", baseImg:"Copper13", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"copper-14", name:"Item 14", section:"Copper Products", baseImg:"Copper14", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"copper-15", name:"Item 15", section:"Copper Products", baseImg:"Copper15", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"copper-16", name:"Item 16", section:"Copper Products", baseImg:"Copper16", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"copper-17", name:"Item 17", section:"Copper Products", baseImg:"Copper17", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    
    // IRON PRODUCTS - 30 items
    { id:"iron-1", name:"Item 1", section:"Iron Products", baseImg:"Iron1", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"iron-2", name:"Item 2", section:"Iron Products", baseImg:"Iron2", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"iron-3", name:"Item 3", section:"Iron Products", baseImg:"Iron3", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"iron-4", name:"Item 4", section:"Iron Products", baseImg:"Iron4", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"iron-5", name:"Item 5", section:"Iron Products", baseImg:"Iron5", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"iron-6", name:"Item 6", section:"Iron Products", baseImg:"Iron6", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"iron-7", name:"Item 7", section:"Iron Products", baseImg:"Iron7", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"iron-8", name:"Item 8", section:"Iron Products", baseImg:"Iron8", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"iron-9", name:"Item 9", section:"Iron Products", baseImg:"Iron9", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"iron-10", name:"Item 10", section:"Iron Products", baseImg:"Iron10", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"iron-11", name:"Item 11", section:"Iron Products", baseImg:"Iron11", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"iron-12", name:"Item 12", section:"Iron Products", baseImg:"Iron12", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"iron-13", name:"Item 13", section:"Iron Products", baseImg:"Iron13", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"iron-14", name:"Item 14", section:"Iron Products", baseImg:"Iron14", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"iron-15", name:"Item 15", section:"Iron Products", baseImg:"Iron15", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"iron-16", name:"Item 16", section:"Iron Products", baseImg:"Iron16", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"iron-17", name:"Item 17", section:"Iron Products", baseImg:"Iron17", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"iron-18", name:"Item 18", section:"Iron Products", baseImg:"Iron18", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"iron-19", name:"Item 19", section:"Iron Products", baseImg:"Iron19", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"iron-20", name:"Item 20", section:"Iron Products", baseImg:"Iron20", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"iron-21", name:"Item 21", section:"Iron Products", baseImg:"Iron21", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"iron-22", name:"Item 22", section:"Iron Products", baseImg:"Iron22", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"iron-23", name:"Item 23", section:"Iron Products", baseImg:"Iron23", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"iron-24", name:"Item 24", section:"Iron Products", baseImg:"Iron24", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"iron-25", name:"Item 25", section:"Iron Products", baseImg:"Iron25", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"iron-26", name:"Item 26", section:"Iron Products", baseImg:"Iron26", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"iron-27", name:"Item 27", section:"Iron Products", baseImg:"Iron27", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"iron-28", name:"Item 28", section:"Iron Products", baseImg:"Iron28", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"iron-29", name:"Item 29", section:"Iron Products", baseImg:"Iron29", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"iron-30", name:"Item 30", section:"Iron Products", baseImg:"Iron30", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    
    // STEEL PRODUCTS - 45 items
    { id:"steel-1", name:"Item 1", section:"Steel Products", baseImg:"Steel1", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"steel-2", name:"Item 2", section:"Steel Products", baseImg:"Steel2", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"steel-3", name:"Item 3", section:"Steel Products", baseImg:"Steel3", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"steel-4", name:"Item 4", section:"Steel Products", baseImg:"Steel4", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"steel-5", name:"Item 5", section:"Steel Products", baseImg:"Steel5", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"steel-6", name:"Item 6", section:"Steel Products", baseImg:"Steel6", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"steel-7", name:"Item 7", section:"Steel Products", baseImg:"Steel7", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"steel-8", name:"Item 8", section:"Steel Products", baseImg:"Steel8", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"steel-9", name:"Item 9", section:"Steel Products", baseImg:"Steel9", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"steel-10", name:"Item 10", section:"Steel Products", baseImg:"Steel10", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"steel-11", name:"Item 11", section:"Steel Products", baseImg:"Steel11", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"steel-12", name:"Item 12", section:"Steel Products", baseImg:"Steel12", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"steel-13", name:"Item 13", section:"Steel Products", baseImg:"Steel13", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"steel-14", name:"Item 14", section:"Steel Products", baseImg:"Steel14", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"steel-15", name:"Item 15", section:"Steel Products", baseImg:"Steel15", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"steel-16", name:"Item 16", section:"Steel Products", baseImg:"Steel16", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"steel-17", name:"Item 17", section:"Steel Products", baseImg:"Steel17", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"steel-18", name:"Item 18", section:"Steel Products", baseImg:"Steel18", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"steel-19", name:"Item 19", section:"Steel Products", baseImg:"Steel19", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"steel-20", name:"Item 20", section:"Steel Products", baseImg:"Steel20", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"steel-21", name:"Item 21", section:"Steel Products", baseImg:"Steel21", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"steel-22", name:"Item 22", section:"Steel Products", baseImg:"Steel22", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"steel-23", name:"Item 23", section:"Steel Products", baseImg:"Steel23", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"steel-24", name:"Item 24", section:"Steel Products", baseImg:"Steel24", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"steel-25", name:"Item 25", section:"Steel Products", baseImg:"Steel25", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"steel-26", name:"Item 26", section:"Steel Products", baseImg:"Steel26", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"steel-27", name:"Item 27", section:"Steel Products", baseImg:"Steel27", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"steel-28", name:"Item 28", section:"Steel Products", baseImg:"Steel28", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"steel-29", name:"Item 29", section:"Steel Products", baseImg:"Steel29", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"steel-30", name:"Item 30", section:"Steel Products", baseImg:"Steel30", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"steel-31", name:"Item 31", section:"Steel Products", baseImg:"Steel31", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"steel-32", name:"Item 32", section:"Steel Products", baseImg:"Steel32", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"steel-33", name:"Item 33", section:"Steel Products", baseImg:"Steel33", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"steel-34", name:"Item 34", section:"Steel Products", baseImg:"Steel34", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"steel-35", name:"Item 35", section:"Steel Products", baseImg:"Steel35", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"steel-36", name:"Item 36", section:"Steel Products", baseImg:"Steel36", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"steel-37", name:"Item 37", section:"Steel Products", baseImg:"Steel37", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"steel-38", name:"Item 38", section:"Steel Products", baseImg:"Steel38", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"steel-39", name:"Item 39", section:"Steel Products", baseImg:"Steel39", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"steel-40", name:"Item 40", section:"Steel Products", baseImg:"Steel40", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"steel-41", name:"Item 41", section:"Steel Products", baseImg:"Steel41", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"steel-42", name:"Item 42", section:"Steel Products", baseImg:"Steel42", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"steel-43", name:"Item 43", section:"Steel Products", baseImg:"Steel43", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"steel-44", name:"Item 44", section:"Steel Products", baseImg:"Steel44", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    { id:"steel-45", name:"Item 45", section:"Steel Products", baseImg:"Steel45", blurb:"Placeholder description", components:["Component x1"], worksWith:["Fabricator"], find:"Location info", map:"" },
    
    // Add remaining sections here...
  ];

  const KEY = "dune-grid-v1";
  const $ = s => document.querySelector(s);
  const left = $("#left");
  const right = $("#right");
  const search = $("#search");

  let state = { collected: new Set(), filter:"", selected: null };

     function load(){
     try{
       const raw = JSON.parse(localStorage.getItem(KEY) || "{}");
       state.collected = new Set(raw.collected || []);
       state.selected = raw.selected || null;
     }catch{}
   }
   function save(){
     localStorage.setItem(KEY, JSON.stringify({ 
       collected: [...state.collected],
       selected: state.selected
     }));
   }

  function sectionsFromData(){
    const map = new Map();
    for(const item of DATA){
      if(!map.has(item.section)) map.set(item.section, []);
      map.get(item.section).push(item);
    }
    return map;
  }

  function renderLeft(){
    left.innerHTML = "";
    const sections = sectionsFromData();
    const term = state.filter.trim().toLowerCase();
    for(const [section, items] of sections){
      const filtered = items.filter(i=>{
        if(!term) return true;
        return [i.name, i.blurb, i.find, ...(i.components||[]), ...(i.worksWith||[])]
          .join(" ").toLowerCase().includes(term);
      });
      if(!filtered.length) continue;

      const title = document.createElement("div");
      title.className="sectionTitle";
      title.innerHTML = `<span>${section}</span><span>${countCollected(items)} / ${items.length}</span>`;
      left.append(title);

      const grid = document.createElement("div");
      grid.className="grid";
      for(const it of filtered){
                 const tile = document.createElement("div");
         tile.className = "tile";
         if(state.collected.has(it.id)) tile.classList.add("collected");
         if(state.selected === it.id) tile.classList.add("selected");

        const img = document.createElement("img");
        img.alt = it.name;
        // Use baseImg to create the correct image path (0 = grey, 1 = purple)
        const imgState = state.collected.has(it.id) ? 1 : 0;
        img.src = it.baseImg ? `Images/${it.baseImg}.${imgState}.png` : "";
        img.onerror = ()=>{ img.style.display="none"; tile.insertAdjacentHTML("beforeend", `<div style="color:#667; font-size:12px">no image</div>`); };

        const label = document.createElement("div"); label.className="label"; label.textContent = it.name;

        tile.append(img, label);
        tile.title = it.name;

                 tile.addEventListener("click", ()=>{
           // Set as selected item to show info
           state.selected = it.id;
           save();
           renderLeft();
           showDetails(it);
         });
         
         tile.addEventListener("dblclick", ()=>{
           // Toggle collection status on double click
           if(state.collected.has(it.id)) state.collected.delete(it.id);
           else state.collected.add(it.id);
           
           save();
           
           // Update the image immediately to show the new state
           const imgState = state.collected.has(it.id) ? 1 : 0;
           img.src = `Images/${it.baseImg}.${imgState}.png`;
           
           // Re-render to update collection styling
           renderLeft();
           updateProgress();
         });

        grid.append(tile);
      }
      left.append(grid);
    }
  }

  function showDetails(it){
    right.innerHTML = "";
    const top = document.createElement("div");
    top.className="card";
    top.innerHTML = `<h2 class="name">${it.name}</h2>
      <p class="tagline">${it.blurb || "—"}</p>`;
    right.append(top);

    const meta = document.createElement("div");
    meta.className="meta";
    const comp = (it.components||[]).length ? it.components.join(", ") : "—";
    const ww = (it.worksWith||[]).length ? it.worksWith.join(", ") : "—";
    meta.innerHTML = `
      <div><span style="color:${getVar('--gold')}">Components</span>: ${comp}</div>
      <div><span style="color:${getVar('--gold')}">Works with</span>: ${ww}</div>
      <div><span style="color:${getVar('--gold')}">Where to find</span>: ${it.find || "—"}</div>
      ${it.map ? `<div><a href="${it.map}" target="_blank" rel="noopener">Open map</a></div>` : ""}`;
    right.append(meta);

    const works = document.createElement("div");
    works.className="works";
    works.innerHTML = `
      <div>Status: ${state.collected.has(it.id) ? "Collected" : "Not collected"}</div>
      <ul><li>Click tile to toggle</li><li>Data saved on this device</li></ul>`;
    right.append(works);
  }

  function getVar(name){ return getComputedStyle(document.documentElement).getPropertyValue(name) || "" }

  function countCollected(items){
    return items.reduce((n,i)=> n + (state.collected.has(i.id)?1:0), 0);
  }

  function updateProgress(){
    const total = DATA.length;
    const got = [...state.collected].filter(id => DATA.some(i=>i.id===id)).length;
    $("#progress").textContent = `${got} / ${total}`;
  }

  $("#exportBtn").onclick = ()=>{
    const blob = new Blob([JSON.stringify({ collected:[...state.collected] }, null, 2)], {type:"application/json"});
    const a = document.createElement("a");
    a.href = URL.createObjectURL(blob);
    a.download = "dune-schematics-progress.json";
    a.click(); URL.revokeObjectURL(a.href);
  };
  $("#importBtn").onclick = ()=> $("#importFile").click();
  $("#importFile").addEventListener("change", async e=>{
    const file = e.target.files[0]; if(!file) return;
    try{
      const text = await file.text();
      const data = JSON.parse(text);
      state.collected = new Set(data.collected || []);
      save(); renderLeft(); updateProgress();
    }catch{
      alert("Import failed. Choose a valid JSON file.");
    }
    e.target.value = "";
  });

  search.addEventListener("input", ()=>{
    state.filter = search.value;
    renderLeft();
  });

     load();
   renderLeft();
   updateProgress();
   
   // Show details for selected item if one exists
   if(state.selected) {
     const selectedItem = DATA.find(item => item.id === state.selected);
     if(selectedItem) showDetails(selectedItem);
   }
</script>
</body>
</html>

>>>>>>> 61da8137beb880583d1203e0762445551192ef17
